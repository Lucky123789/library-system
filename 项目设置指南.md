# 项目设置指南

## 一、终端命令创建项目

### 1. 创建项目目录结构

```bash
# 进入项目目录（如果还没有创建）
cd /Users/luckyang/Desktop/图书管理系统

# 创建后端目录
mkdir -p server/config server/models server/routes server/middleware server/utils

# 创建前端目录
mkdir -p client/src/components client/src/context client/src/services
```

### 2. 初始化后端项目

```bash
cd server
npm init -y
npm install express mongoose jsonwebtoken bcryptjs cors dotenv ws
```

### 3. 初始化前端项目

```bash
cd ../client
npm init -y
npm install react react-dom react-router-dom axios
npm install -D vite @vitejs/plugin-react
```

## 二、需要创建的文件列表

### 后端文件（server/）

1. `package.json` - 项目依赖配置
2. `.env.example` - 环境变量示例
3. `server.js` - 服务器入口文件
4. `config/db.js` - 数据库连接配置
5. `models/User.js` - 用户数据模型
6. `models/Book.js` - 图书数据模型
7. `models/Borrowing.js` - 借阅记录数据模型
8. `middleware/auth.js` - 认证中间件
9. `routes/auth.js` - 认证路由
10. `routes/books.js` - 图书路由
11. `routes/borrowings.js` - 借阅路由
12. `utils/websocket.js` - WebSocket 工具模块

### 前端文件（client/）

1. `package.json` - 项目依赖配置
2. `vite.config.js` - Vite 配置
3. `index.html` - HTML 入口文件
4. `src/main.jsx` - React 入口文件
5. `src/App.jsx` - 主应用组件
6. `src/index.css` - 全局样式
7. `src/services/api.js` - API 服务
8. `src/services/websocket.js` - WebSocket 服务
9. `src/context/AuthContext.jsx` - 认证上下文
10. `src/components/Login.jsx` - 登录组件
11. `src/components/Register.jsx` - 注册组件
12. `src/components/BookList.jsx` - 图书列表组件
13. `src/components/BookForm.jsx` - 图书表单组件
14. `src/components/MyBorrowings.jsx` - 我的借阅组件

## 三、快速启动命令

### 启动 MongoDB（如果使用本地 MongoDB）

```bash
# macOS (使用 Homebrew)
brew services start mongodb-community

# 或直接运行
mongod --dbpath /usr/local/var/mongodb
```

### 启动后端服务器

```bash
cd server
npm start
# 或开发模式
npm run dev
```

### 启动前端开发服务器

```bash
cd client
npm run dev
```

## 四、访问应用

- 前端：http://localhost:5173
- 后端 API：http://localhost:4000
- WebSocket：ws://localhost:4000

## 五、测试账号

注册新账号后，如需设置为管理员，在 MongoDB 中执行：

```javascript
use book-management
db.users.updateOne(
  { username: "your-username" },
  { $set: { role: "admin" } }
)
```

